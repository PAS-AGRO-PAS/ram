---
title: "User Manual - ram Shiny Application"
author: "The PAS-AGRO-PAS Development Team"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{User Manual - ram Shiny Application}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment  = "#>"
)
```

# Introduction

Welcome to the user manual for the **PAS-AGRO-PAS** Shiny application. This application was developed to optimize the allocation of agricultural resources and activities. This manual will guide you through the application's features and how to use them.

# Quick start

The app has two modes:

- **Solve** (default): upload or edit resource/activity tables, set the objective direction, and run the solver.
- **Builder**: add resources/activities interactively with synced columns, then click **Open In Solver** to hand off tables to the solver in a new tab.

Launch with:

```r
ram::run_app(mode = "solve")   # or mode = "builder"
```

# Data requirements (both modes)

- **Resources table**: columns `resource` (unique, non-empty), `availability` (numeric), `direction` (<= or >=).
- **Activities table**: columns `activity` (unique, non-empty), one or more resource coefficient columns (numeric), and `objective` (numeric).
- Uploads and inline edits are validated. If an edit fails (non-numeric, duplicate names, bad direction), the app reverts to the previous table and shows a notification.

# Solve mode workflow

1. **Templates & Uploads** (sidebar): download CSV templates, or upload your own resource/activity CSVs. Uploading replaces the current tables and clears old solutions.
2. **Inline edits**: click cells in the resources/activities tables to edit values. Edits are validated immediately.
3. **Objective**: choose Maximize or Minimize.
4. **Solve**: click **Solve Model**. On success you get:
   - **Optimal Solution**: activity levels plus resource usage, with horizontal scroll for wide tables.
   - **Objective value** and **Activity plot**.
   - **Sensitivity**: shadow prices/allowable ranges when available.
   - **Solver report download** (.rds of the lpSolve result).

# Builder mode workflow

1. Add resources with **Add Resource** (names must be unique and non-empty).
2. Add activities with **Add Activity** after at least one resource exists; coefficients default to 0 and all resource columns stay aligned.
3. Remove rows with the paired **Remove** buttons.
4. Export CSV/XLSX for both tables at any time.
5. Click **Open In Solver** to send the current tables (base64 JSON) to a new solve-mode tab; no manual CSV steps needed.

# Exports

- **Solve mode**: download the current resources/activities as CSV (sidebar buttons).
- **Builder mode**: download resources/activities as CSV or XLSX (sidebar buttons).

# Tips

- Keep resource/activity names unique; duplicate uploads are rejected.
- If you see “No matching records” in tables, upload/enter data again; edits and uploads always refresh the displayed data.
- The solver tables remain visible after solving; uploads or edits replace them.

# Contact & Further Reading

For advanced usage and code examples see the package’s GitHub repository,
or the formal documentation vignettes included in the ram package.

If you have questions or encounter bugs, please open an issue at
https://github.com/PAS-AGRO-PAS/ram/issues.
