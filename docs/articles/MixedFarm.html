<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mixed Farm Optimisation • ram</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Mixed Farm Optimisation">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ram</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><link href="MixedFarm_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="MixedFarm_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="MixedFarm_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="MixedFarm_files/datatables-binding-0.34.0/datatables.js"></script><link href="MixedFarm_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="MixedFarm_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="MixedFarm_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="MixedFarm_files/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="MixedFarm_files/crosstalk-1.2.2/js/crosstalk.min.js"></script><script src="MixedFarm_files/plotly-binding-4.11.0/plotly.js"></script><script src="MixedFarm_files/typedarray-0.1/typedarray.min.js"></script><link href="MixedFarm_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="MixedFarm_files/plotly-main-2.11.1/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Mixed Farm Optimisation</h1>
            
      

      <div class="hidden name"><code>MixedFarm.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In Mediterranean mixed‐farm systems, land and labor are shared
between arable crops and livestock enterprises. The objective of this
analysis is to determine the profit‐maximizing allocation of 15 ha of
land, 350 h of labor and 400 kg of available nitrogen among four winter
crops and a temporary pasture for sheep. Each crop carries standard
agronomic area bounds (e.g. oat between 2 ha and 8 ha), and pasture must
lie between 2 ha and 4 ha. Margins (€/ha) and resource requirements
(land, labor, nitrogen) are summarized in Table 1.</p>
<p><strong>Table 1.</strong> Resource requirements, margins and area
bounds for each activity.</p>
<table class="table">
<colgroup>
<col width="17%">
<col width="12%">
<col width="12%">
<col width="17%">
<col width="17%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="center">Activity</th>
<th align="center">Land (ha)</th>
<th align="center">Labor (h)</th>
<th align="center">Nitrogen (kg)</th>
<th align="center">Margin (€/ha)</th>
<th align="center">Area bounds (ha)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center"><strong>Oat</strong></td>
<td align="center">1</td>
<td align="center">20</td>
<td align="center">80</td>
<td align="center">400</td>
<td align="center">2 – 8</td>
</tr>
<tr class="even">
<td align="center"><strong>Barley</strong></td>
<td align="center">1</td>
<td align="center">25</td>
<td align="center">100</td>
<td align="center">450</td>
<td align="center">1 – 6</td>
</tr>
<tr class="odd">
<td align="center"><strong>Lupin</strong></td>
<td align="center">1</td>
<td align="center">15</td>
<td align="center">0</td>
<td align="center">350</td>
<td align="center">2 – 5</td>
</tr>
<tr class="even">
<td align="center"><strong>Fava</strong></td>
<td align="center">1</td>
<td align="center">30</td>
<td align="center">30</td>
<td align="center">500</td>
<td align="center">1 – 3</td>
</tr>
<tr class="odd">
<td align="center"><strong>Pasture</strong></td>
<td align="center">1</td>
<td align="center">10</td>
<td align="center">0</td>
<td align="center">360</td>
<td align="center">2 – 4</td>
</tr>
</tbody>
</table>
<p>We formulate a linear program to maximize total gross margin subject
to resource and area‐bound constraints. The following sections describe
the model construction, solution and sensitivity analysis using the
<code>ram</code> package.</p>
</div>
<div class="section level2">
<h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a>
</h2>
<div class="section level3">
<h3 id="define-resource-constraints">Define Resource Constraints<a class="anchor" aria-label="anchor" href="#define-resource-constraints"></a>
</h3>
<p>We first declare the available resources and the minimum/maximum area
constraints for each crop and pasture. The function
<code><a href="../reference/define_resources.html">define_resources()</a></code> accepts three parallel vectors: resource
names, availabilities, and constraint directions (<code>"≤"</code> or
<code>"≥"</code>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 1: Define Resource Constraints (flexible min/max for each crop)</span></span>
<span><span class="va">resources</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_resources.html">define_resources</a></span><span class="op">(</span></span>
<span>  resources <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="co"># total availables</span></span>
<span>    <span class="st">"land"</span>, <span class="st">"labor"</span>, <span class="st">"nitrogen"</span>,</span>
<span>    <span class="co"># per‐crop bounds</span></span>
<span>    <span class="st">"oat_min"</span>,   <span class="st">"oat_max"</span>,</span>
<span>    <span class="st">"barley_min"</span>,<span class="st">"barley_max"</span>,</span>
<span>    <span class="st">"lupin_min"</span>, <span class="st">"lupin_max"</span>,</span>
<span>    <span class="st">"fava_min"</span>,  <span class="st">"fava_max"</span>,</span>
<span>    <span class="st">"pasture_min"</span>,<span class="st">"pasture_max"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="co"># totals</span></span>
<span>     <span class="fl">15</span>,    <span class="fl">350</span>,    <span class="fl">400</span>,</span>
<span>    <span class="co"># bounds</span></span>
<span>      <span class="fl">2</span>,      <span class="fl">8</span>,   <span class="co"># oat</span></span>
<span>      <span class="fl">1</span>,      <span class="fl">6</span>,   <span class="co"># barley</span></span>
<span>      <span class="fl">2</span>,      <span class="fl">5</span>,   <span class="co"># lupin</span></span>
<span>      <span class="fl">1</span>,      <span class="fl">3</span>,   <span class="co"># fava</span></span>
<span>      <span class="fl">2</span>,      <span class="fl">4</span>    <span class="co"># pasture</span></span>
<span>  <span class="op">)</span>,</span>
<span>  direction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="co"># totals all &lt;=</span></span>
<span>    <span class="st">"&lt;="</span>,   <span class="st">"&lt;="</span>,   <span class="st">"&lt;="</span>,</span>
<span>    <span class="co"># minimums &gt;=, maximums &lt;=</span></span>
<span>    <span class="st">"&gt;="</span>, <span class="st">"&lt;="</span>,  <span class="co"># oat</span></span>
<span>    <span class="st">"&gt;="</span>, <span class="st">"&lt;="</span>,  <span class="co"># barley</span></span>
<span>    <span class="st">"&gt;="</span>, <span class="st">"&lt;="</span>,  <span class="co"># lupin</span></span>
<span>    <span class="st">"&gt;="</span>, <span class="st">"&lt;="</span>,  <span class="co"># fava</span></span>
<span>    <span class="st">"&gt;="</span>, <span class="st">"&lt;="</span>   <span class="co"># pasture</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">resources</span><span class="op">)</span></span>
<span><span class="co">#&gt;       resource availability direction</span></span>
<span><span class="co">#&gt; 1         land           15        &lt;=</span></span>
<span><span class="co">#&gt; 2        labor          350        &lt;=</span></span>
<span><span class="co">#&gt; 3     nitrogen          400        &lt;=</span></span>
<span><span class="co">#&gt; 4      oat_min            2        &gt;=</span></span>
<span><span class="co">#&gt; 5      oat_max            8        &lt;=</span></span>
<span><span class="co">#&gt; 6   barley_min            1        &gt;=</span></span>
<span><span class="co">#&gt; 7   barley_max            6        &lt;=</span></span>
<span><span class="co">#&gt; 8    lupin_min            2        &gt;=</span></span>
<span><span class="co">#&gt; 9    lupin_max            5        &lt;=</span></span>
<span><span class="co">#&gt; 10    fava_min            1        &gt;=</span></span>
<span><span class="co">#&gt; 11    fava_max            3        &lt;=</span></span>
<span><span class="co">#&gt; 12 pasture_min            2        &gt;=</span></span>
<span><span class="co">#&gt; 13 pasture_max            4        &lt;=</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="specify-activities">Specify Activities<a class="anchor" aria-label="anchor" href="#specify-activities"></a>
</h3>
<p>Next, we assemble the technical matrix, whose rows correspond to the
resources declared above, and whose columns correspond to the five
activities. Each entry is the per‐unit requirement (or, for area‐bounds
rows, an indicator). The vector objective lists the margin for each
activity.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 2: Define Activities</span></span>
<span><span class="va">activity_requirements_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="co"># land (ha)</span></span>
<span>     <span class="fl">1</span>,    <span class="fl">1</span>,    <span class="fl">1</span>,    <span class="fl">1</span>,     <span class="fl">1</span>, </span>
<span>    <span class="co"># labor (h)</span></span>
<span>    <span class="fl">20</span>,   <span class="fl">25</span>,   <span class="fl">15</span>,   <span class="fl">30</span>,    <span class="fl">10</span>, </span>
<span>    <span class="co"># nitrogen (kg)</span></span>
<span>    <span class="fl">80</span>,  <span class="fl">100</span>,    <span class="fl">0</span>,   <span class="fl">30</span>,     <span class="fl">0</span>, </span>
<span>    <span class="co"># bounds indicator rows (1 for that crop, 0 else)</span></span>
<span>    <span class="co"># oat_min</span></span>
<span>     <span class="fl">1</span>,   <span class="fl">0</span>,    <span class="fl">0</span>,    <span class="fl">0</span>,     <span class="fl">0</span>,</span>
<span>    <span class="co"># oat_max</span></span>
<span>     <span class="fl">1</span>,   <span class="fl">0</span>,    <span class="fl">0</span>,    <span class="fl">0</span>,     <span class="fl">0</span>,</span>
<span>    <span class="co"># barley_min</span></span>
<span>     <span class="fl">0</span>,   <span class="fl">1</span>,    <span class="fl">0</span>,    <span class="fl">0</span>,     <span class="fl">0</span>,</span>
<span>    <span class="co"># barley_max</span></span>
<span>     <span class="fl">0</span>,   <span class="fl">1</span>,    <span class="fl">0</span>,    <span class="fl">0</span>,     <span class="fl">0</span>,</span>
<span>    <span class="co"># lupin_min</span></span>
<span>     <span class="fl">0</span>,   <span class="fl">0</span>,    <span class="fl">1</span>,    <span class="fl">0</span>,     <span class="fl">0</span>,</span>
<span>    <span class="co"># lupin_max</span></span>
<span>     <span class="fl">0</span>,   <span class="fl">0</span>,    <span class="fl">1</span>,    <span class="fl">0</span>,     <span class="fl">0</span>,</span>
<span>    <span class="co"># fava_min</span></span>
<span>     <span class="fl">0</span>,   <span class="fl">0</span>,    <span class="fl">0</span>,    <span class="fl">1</span>,     <span class="fl">0</span>,</span>
<span>    <span class="co"># fava_max</span></span>
<span>     <span class="fl">0</span>,   <span class="fl">0</span>,    <span class="fl">0</span>,    <span class="fl">1</span>,     <span class="fl">0</span>,</span>
<span>    <span class="co"># pasture_min</span></span>
<span>     <span class="fl">0</span>,   <span class="fl">0</span>,    <span class="fl">0</span>,    <span class="fl">0</span>,     <span class="fl">1</span>,</span>
<span>    <span class="co"># pasture_max</span></span>
<span>     <span class="fl">0</span>,   <span class="fl">0</span>,    <span class="fl">0</span>,    <span class="fl">0</span>,     <span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resources</span><span class="op">)</span>,</span>
<span>  byrow <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="va">resources</span><span class="op">$</span><span class="va">resource</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"oat"</span>,<span class="st">"barley"</span>,<span class="st">"lupin"</span>,<span class="st">"fava"</span>,<span class="st">"pasture"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">objective</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>oat<span class="op">=</span><span class="fl">400</span>, barley<span class="op">=</span><span class="fl">450</span>, lupin<span class="op">=</span><span class="fl">350</span>, fava<span class="op">=</span><span class="fl">500</span>, pasture<span class="op">=</span><span class="fl">360</span><span class="op">)</span></span>
<span></span>
<span><span class="va">activities</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_activities.html">define_activities</a></span><span class="op">(</span></span>
<span>  activities <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">activity_requirements_matrix</span><span class="op">)</span>,</span>
<span>  activity_requirements_matrix <span class="op">=</span> <span class="va">activity_requirements_matrix</span>,</span>
<span>  objective <span class="op">=</span> <span class="va">objective</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">activities</span><span class="op">)</span></span>
<span><span class="co">#&gt;         activity land labor nitrogen oat_min oat_max barley_min barley_max</span></span>
<span><span class="co">#&gt; oat          oat    1    20       80       1       1          0          0</span></span>
<span><span class="co">#&gt; barley    barley    1    25      100       0       0          1          1</span></span>
<span><span class="co">#&gt; lupin      lupin    1    15        0       0       0          0          0</span></span>
<span><span class="co">#&gt; fava        fava    1    30       30       0       0          0          0</span></span>
<span><span class="co">#&gt; pasture  pasture    1    10        0       0       0          0          0</span></span>
<span><span class="co">#&gt;         lupin_min lupin_max fava_min fava_max pasture_min pasture_max objective</span></span>
<span><span class="co">#&gt; oat             0         0        0        0           0           0       400</span></span>
<span><span class="co">#&gt; barley          0         0        0        0           0           0       450</span></span>
<span><span class="co">#&gt; lupin           1         1        0        0           0           0       350</span></span>
<span><span class="co">#&gt; fava            0         0        1        1           0           0       500</span></span>
<span><span class="co">#&gt; pasture         0         0        0        0           1           1       360</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="build-and-solve-the-linear-program">Build and Solve the Linear Program<a class="anchor" aria-label="anchor" href="#build-and-solve-the-linear-program"></a>
</h3>
<p>The model is constructed via <code><a href="../reference/create_ram_model.html">create_ram_model()</a></code> and
solved in the maximization sense with <code><a href="../reference/solve_ram.html">solve_ram()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 3: Build and Solve the Model</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_ram_model.html">create_ram_model</a></span><span class="op">(</span><span class="va">resources</span>, <span class="va">activities</span><span class="op">)</span></span>
<span><span class="va">solution</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_ram.html">solve_ram</a></span><span class="op">(</span><span class="va">model</span>, direction <span class="op">=</span> <span class="st">"max"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h2>
<div class="section level3">
<h3 id="optimal-allocation">Optimal Allocation<a class="anchor" aria-label="anchor" href="#optimal-allocation"></a>
</h3>
<p>The optimal area (ha) for each activity is extracted from
<code>solution$optimal_activities</code> and presented in Table 2.</p>
<p>Table 2. Optimal area allocation (ha) under maximized gross
margin.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Activity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">solution</span><span class="op">$</span><span class="va">optimal_activities</span><span class="op">)</span>,</span>
<span>  Area_ha  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">solution</span><span class="op">$</span><span class="va">optimal_activities</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  caption <span class="op">=</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">tags</a></span><span class="op">$</span><span class="fu">caption</span><span class="op">(</span></span>
<span>    style <span class="op">=</span> <span class="st">"caption-side: top; text-align: left;"</span>,</span>
<span>    <span class="st">"Table 2. Optimal area allocation (ha) under maximized gross margin."</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rownames <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    autoWidth <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    columnDefs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">'3cm'</span>, targets <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,  <span class="co"># first column (activity)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">'2cm'</span>, targets <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>   <span class="co"># second column (level)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html" class="external-link">formatRound</a></span><span class="op">(</span><span class="st">"Area_ha"</span>, <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left;\">Table 2. Optimal area allocation (ha) under maximized gross margin.<\/caption>","data":[["oat","barley","lupin","fava","pasture"],[2,1.5,4.5,3,4]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Activity<\/th>\n      <th>Area_ha<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"autoWidth":true,"columnDefs":[{"targets":1,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"width":"3cm","targets":0},{"width":"2cm","targets":1},{"className":"dt-right","targets":1},{"name":"Activity","targets":0},{"name":"Area_ha","targets":1}],"order":[],"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render"],"jsHooks":[]}</script><p>The maximum total gross margin achieved is:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Maximum gross margin (EUR):"</span>, <span class="va">solution</span><span class="op">$</span><span class="va">objective_value</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Maximum gross margin (EUR): 5990</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_ram.html">plot_ram</a></span><span class="op">(</span><span class="va">solution</span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"visdat":{"be5d1bb362e4":["function () ","plotlyVisDat"]},"cur_data":"be5d1bb362e4","attrs":{"be5d1bb362e4":{"x":["oat","barley","lupin","fava","pasture"],"y":[2,1.5000000000000002,4.5,2.9999999999999996,4],"marker":{"color":"blue"},"hoverinfo":"x+y","name":"Level","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Optimal Resource Allocation","xaxis":{"domain":[0,1],"automargin":true,"title":"Activity","type":"category","categoryorder":"array","categoryarray":["barley","fava","lupin","oat","pasture"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Level"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["oat","barley","lupin","fava","pasture"],"y":[2,1.5000000000000002,4.5,2.9999999999999996,4],"marker":{"color":"blue","line":{"color":"rgba(31,119,180,1)"}},"hoverinfo":["x+y","x+y","x+y","x+y","x+y"],"name":"Level","type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="shadow-prices-and-sensitivity">Shadow Prices and Sensitivity<a class="anchor" aria-label="anchor" href="#shadow-prices-and-sensitivity"></a>
</h3>
<p>To explore the economic value of relaxing each constraint, we compute
the shadow prices via <code><a href="../reference/sensitivity_ram.html">sensitivity_ram()</a></code>. A non‐zero shadow
price for a <code>"≤"</code> constraint indicates the marginal gain per
extra unit of that resource.</p>
<div class="section level4">
<h4 id="step-5-sensitivity-analysis">Step 5: Sensitivity Analysis<a class="anchor" aria-label="anchor" href="#step-5-sensitivity-analysis"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sensitivity_ram.html">sensitivity_ram</a></span><span class="op">(</span><span class="va">solution</span><span class="op">)</span></span>
<span><span class="co">#&gt;       resource direction availability shadow_price lower_bound upper_bound</span></span>
<span><span class="co">#&gt; 1         land        &lt;=           15            0           0           0</span></span>
<span><span class="co">#&gt; 2        labor        &lt;=          350           NA          NA          NA</span></span>
<span><span class="co">#&gt; 3     nitrogen        &lt;=          400           NA          NA          NA</span></span>
<span><span class="co">#&gt; 4      oat_min        &gt;=            2           NA          NA          NA</span></span>
<span><span class="co">#&gt; 5      oat_max        &lt;=            8           NA          NA          NA</span></span>
<span><span class="co">#&gt; 6   barley_min        &gt;=            1           NA          NA          NA</span></span>
<span><span class="co">#&gt; 7   barley_max        &lt;=            6           NA          NA          NA</span></span>
<span><span class="co">#&gt; 8    lupin_min        &gt;=            2           NA          NA          NA</span></span>
<span><span class="co">#&gt; 9    lupin_max        &lt;=            5           NA          NA          NA</span></span>
<span><span class="co">#&gt; 10    fava_min        &gt;=            1           NA          NA          NA</span></span>
<span><span class="co">#&gt; 11    fava_max        &lt;=            3           NA          NA          NA</span></span>
<span><span class="co">#&gt; 12 pasture_min        &gt;=            2           NA          NA          NA</span></span>
<span><span class="co">#&gt; 13 pasture_max        &lt;=            4           NA          NA          NA</span></span>
<span><span class="co"># Compute sensitivity</span></span>
<span><span class="va">sens</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sensitivity_ram.html">sensitivity_ram</a></span><span class="op">(</span><span class="va">solution</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Render as a clean datatable</span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span></span>
<span>  <span class="va">sens</span>,</span>
<span>  caption <span class="op">=</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">tags</a></span><span class="op">$</span><span class="fu">caption</span><span class="op">(</span></span>
<span>    style <span class="op">=</span> <span class="st">"caption-side: top; text-align: left;"</span>,</span>
<span>    <span class="st">"Table 3. Sensitivity analysis of constraints (shadow prices and allowable ranges)."</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rownames <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Resource"</span>, <span class="st">"Direction"</span>, <span class="st">"Availability"</span>, </span>
<span>    <span class="st">"Shadow Price"</span>, <span class="st">"Lower Bound"</span>, <span class="st">"Upper Bound"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    pageLength <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">sens</span><span class="op">)</span>,</span>
<span>    dom <span class="op">=</span> <span class="st">'t'</span>,    <span class="co"># only the table, no extra controls</span></span>
<span>    columnDefs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>className <span class="op">=</span> <span class="st">'dt-center'</span>, targets <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html" class="external-link">formatRound</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"availability"</span>, <span class="st">"shadow_price"</span>, <span class="st">"lower_bound"</span>, <span class="st">"upper_bound"</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"filter":"none","vertical":false,"caption":"<caption style=\"caption-side: top; text-align: left;\">Table 3. Sensitivity analysis of constraints (shadow prices and allowable ranges).<\/caption>","data":[["land","labor","nitrogen","oat_min","oat_max","barley_min","barley_max","lupin_min","lupin_max","fava_min","fava_max","pasture_min","pasture_max"],["&lt;=","&lt;=","&lt;=","&gt;=","&lt;=","&gt;=","&lt;=","&gt;=","&lt;=","&gt;=","&lt;=","&gt;=","&lt;="],[15,350,400,2,8,1,6,2,5,1,3,2,4],[0,null,null,null,null,null,null,null,null,null,null,null,null],[0,null,null,null,null,null,null,null,null,null,null,null,null],[0,null,null,null,null,null,null,null,null,null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Resource<\/th>\n      <th>Direction<\/th>\n      <th>Availability<\/th>\n      <th>Shadow Price<\/th>\n      <th>Lower Bound<\/th>\n      <th>Upper Bound<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":13,"dom":"t","columnDefs":[{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"className":"dt-center","targets":[0,1,2,3,4,5]},{"name":"resource","targets":0},{"name":"direction","targets":1},{"name":"availability","targets":2},{"name":"shadow_price","targets":3},{"name":"lower_bound","targets":4},{"name":"upper_bound","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,13,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render"],"jsHooks":[]}</script>
</div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The sensitivity analysis in Table 3 highlights which constraints are
active at the optimum and how marginal changes in resource availability
would affect the maximum gross margin. A shadow price of zero for land
indicates that, under the current parameterisation, land is not the
binding constraint—there is slack capacity. The absence of numeric
shadow prices (NA) for labor, nitrogen, and the per‐crop bounds
signifies that these constraints either are non‐binding or lie outside
the solver’s range reporting.</p>
<p>Notably, all minimum area bounds for the four winter crops and the
temporary pasture are respected exactly (the solution values coincide
with their minimum or maximum limits), confirming that these structural
requirements shape the optimal plan. Practitioners may use these
insights to decide whether relaxing or tightening particular bounds
(e.g., allowing more pasture area or increasing labor availability)
could unlock additional profitability. Moreover, this framework can
readily incorporate further enterprises (e.g., olive groves, poultry) or
environmental targets (e.g., nitrate leaching limits) by augmenting the
resources and activities matrices accordingly.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Vasco Cadavez, Ursula Gonzales-Barron.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
